!function(t){var e={};function o(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){},function(t,e,o){"use strict";o.r(e);o(0);(new class{constructor(){this.bucket=!1,this.colorPicker=!1,this.pen=!0,this.drawing=!1,this.currentColorValue="#41F795",this.previousColorValue="#C4C4C4",this.canvasEl=document.querySelector(".canvas"),this.ctx=this.canvasEl.getContext("2d"),this.bucketToolEl=document.querySelector(".fill-bucket"),this.colorPickerToolEl=document.querySelector(".choose-color"),this.penToolEl=document.querySelector(".pencil"),this.currentColorInput=document.querySelector(".current-color-input"),this.currentColor=document.querySelector(".current-color"),this.previousColor=document.querySelector(".previous-color"),this.canvasEl.width=16,this.canvasEl.height=16,this.keys={p:80,c:67,b:66}}init(){this.addClassActive(),this.getState(),this.setCanvasState(),this.activateTool(),this.controlKeyboard(),this.chooseColor(),this.penTool(),this.bucketTool()}getState(){this.getToolState(),this.getColorState(),this.getCanvasState()}getToolState(){this.bucket=JSON.parse(localStorage.getItem("bucket")),this.colorPicker=JSON.parse(localStorage.getItem("colorPicker")),this.pen=JSON.parse(localStorage.getItem("pen")),this.addClassActive()}getColorState(){this.currentColorValue=localStorage.getItem("currentColorValue"),this.previousColorValue=localStorage.getItem("previousColorValue"),this.setPaletteColor()}getCanvasState(){const t=localStorage.getItem("canvasImage"),e=new Image;e.src=t,e.addEventListener("load",()=>{this.ctx.drawImage(e,0,0)})}setToolState(){localStorage.setItem("bucket",this.bucket),localStorage.setItem("colorPicker",this.colorPicker),localStorage.setItem("pen",this.pen)}setColorState(){localStorage.setItem("currentColorValue",this.currentColorValue),localStorage.setItem("previousColorValue",this.previousColorValue)}setCanvasState(){window.addEventListener("beforeunload",()=>{localStorage.setItem("canvasImage",this.canvasEl.toDataURL())})}addClassActive(){this.bucket&&(this.removeClassActive(),this.bucketToolEl.classList.add("active"),this.currentColorInput.classList.add("hidden")),this.colorPicker&&(this.removeClassActive(),this.colorPickerToolEl.classList.add("active"),this.currentColorInput.classList.remove("hidden")),this.pen&&(this.removeClassActive(),this.penToolEl.classList.add("active"),this.currentColorInput.classList.add("hidden"))}activateTool(){this.activateBucketTool(),this.activateColorPickerTool(),this.activatePenTool()}activatePenTool(){this.penToolEl.addEventListener("click",()=>{this.choosePenTool()})}choosePenTool(){this.pen||(this.removeActiveTool(),this.pen=!this.pen,this.addClassActive(),this.setToolState())}activateBucketTool(){this.bucketToolEl.addEventListener("click",()=>{this.chooseBucketTool()})}chooseBucketTool(){this.bucket||(this.removeActiveTool(),this.bucket=!this.bucket,this.addClassActive(),this.setToolState())}activateColorPickerTool(){this.colorPickerToolEl.addEventListener("click",()=>{this.chooseColorPickerTool()})}chooseColorPickerTool(){this.colorPicker||(this.removeActiveTool(),this.colorPicker=!this.colorPicker,this.addClassActive(),this.setToolState())}removeActiveTool(){this.bucket=!1,this.colorPicker=!1,this.pen=!1}removeClassActive(){this.toolItem=document.querySelectorAll(".tool-item"),Array.from(this.toolItem).forEach(t=>{t.classList.remove("active")})}controlKeyboard(){document.addEventListener("keyup",t=>{t.keyCode===this.keys.b&&this.chooseBucketTool(),t.keyCode===this.keys.c&&this.chooseColorPickerTool(),t.keyCode===this.keys.p&&this.choosePenTool()})}chooseColor(){this.chooseInputColor(),this.choosePaletteColor(),this.chooseCanvasColor()}chooseInputColor(){this.currentColorInput.addEventListener("input",t=>{if(this.colorPicker){const e=this.currentColorValue;this.previousColorValue=e,this.currentColorValue=t.target.value,this.setPaletteColor(),this.setColorState()}})}choosePaletteColor(){document.querySelector(".toolbar-color").addEventListener("click",t=>{if(this.colorPicker&&t.target.classList.contains("color")){const e=this.currentColorValue;this.previousColorValue=e,this.currentColorValue=getComputedStyle(t.target).backgroundColor,this.setPaletteColor(),this.setColorState()}})}chooseCanvasColor(){this.canvasEl.addEventListener("click",t=>{if(this.colorPicker){const e=t.offsetX,o=t.offsetY,s=this.ctx.getImageData(e,o,1,1).data,r=this.currentColorValue;this.previousColorValue=r,this.currentColorValue=`rgba(${s[0]},${s[1]},${s[2]},1)`,this.setPaletteColor(),this.setColorState()}})}setPaletteColor(){this.currentColor.style.backgroundColor=this.currentColorValue,this.previousColor.style.backgroundColor=this.previousColorValue}penTool(){this.canvasEl.addEventListener("mousedown",()=>{this.drawing=!0}),this.canvasEl.addEventListener("mouseup",()=>{this.drawing=!1}),this.canvasEl.addEventListener("mousemove",t=>{if(this.drawing&&this.pen){const e=t.offsetX,o=t.offsetY;this.ctx.fillStyle=this.currentColorValue,this.ctx.fillRect(e,o,1,1),this.ctx.fill()}})}bucketTool(){this.canvasEl.addEventListener("click",()=>{this.bucket&&(this.ctx.fillStyle=this.currentColorValue,this.ctx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height))})}}).init()}]);
//# sourceMappingURL=app.bundle.js.map